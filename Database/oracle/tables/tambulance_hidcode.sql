DROP TABLE ASU.TAMBULANCE_HIDCODE CASCADE CONSTRAINTS
/

--
-- TAMBULANCE_HIDCODE  (Table) 
--
CREATE TABLE ASU.TAMBULANCE_HIDCODE
(
  FK_ID     NUMBER(15),
  FK_AMBID  NUMBER(15),
  FC_CODE   VARCHAR2(10 BYTE),
  FL_BREAK  VARCHAR2(1 BYTE)                    DEFAULT 0
)
TABLESPACE USR
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOLOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING
/

COMMENT ON COLUMN ASU.TAMBULANCE_HIDCODE.FK_ID IS 'SEQUENCE=[SEQ_TAMBULANCE_HIDCODE]'
/

COMMENT ON COLUMN ASU.TAMBULANCE_HIDCODE.FK_AMBID IS 'код амбулаторного'
/

COMMENT ON COLUMN ASU.TAMBULANCE_HIDCODE.FC_CODE IS 'код хидовской карточки'
/

COMMENT ON COLUMN ASU.TAMBULANCE_HIDCODE.FL_BREAK IS 'заблокирована'
/


--
-- TAMBULANCE_HIDCODE_BY_AMBID  (Index) 
--
--  Dependencies: 
--   TAMBULANCE_HIDCODE (Table)
--
CREATE UNIQUE INDEX ASU.TAMBULANCE_HIDCODE_BY_AMBID ON ASU.TAMBULANCE_HIDCODE
(FK_AMBID)
NOLOGGING
TABLESPACE INDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL
/


--
-- TAMBULANCE_HIDCODE_BY_CODE  (Index) 
--
--  Dependencies: 
--   TAMBULANCE_HIDCODE (Table)
--
CREATE UNIQUE INDEX ASU.TAMBULANCE_HIDCODE_BY_CODE ON ASU.TAMBULANCE_HIDCODE
(FC_CODE)
NOLOGGING
TABLESPACE INDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL
/


--
-- TAMBULANCE_HIDCODE_BEFORE_INS  (Trigger) 
--
--  Dependencies: 
--   TAMBULANCE_HIDCODE (Table)
--
CREATE OR REPLACE TRIGGER ASU."TAMBULANCE_HIDCODE_BEFORE_INS" 
 BEFORE
  INSERT
 ON tambulance_hidcode
REFERENCING NEW AS NEW OLD AS OLD
 FOR EACH ROW
begin
SELECT seq_tambulance_hidcode.NEXTVAL INTO :NEW.FK_ID FROM DUAL;
end;
/
SHOW ERRORS;


