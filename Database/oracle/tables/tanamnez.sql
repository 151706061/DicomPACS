DROP TABLE ASU.TANAMNEZ CASCADE CONSTRAINTS
/

--
-- TANAMNEZ  (Table) 
--
CREATE TABLE ASU.TANAMNEZ
(
  FK_ID         NUMBER(15),
  FK_PACID      NUMBER(15)                      DEFAULT -1,
  FC_NASL       VARCHAR2(60 BYTE),
  FD_TRUD       DATE,
  FC_WORK       VARCHAR2(60 BYTE),
  FC_PITANIE    VARCHAR2(60 BYTE),
  FC_SEM_POL    VARCHAR2(60 BYTE),
  FC_CHILD      VARCHAR2(60 BYTE),
  FP_KUR        NUMBER(2)                       DEFAULT 0,
  FC_ALC        VARCHAR2(60 BYTE),
  FC_MET_ROP    VARCHAR2(60 BYTE),
  FC_PROF_VRED  VARCHAR2(60 BYTE),
  FC_FIZ_AKT    VARCHAR2(60 BYTE),
  FC_ALERG      VARCHAR2(60 BYTE),
  FC_OPERATION  VARCHAR2(60 BYTE),
  FC_NERV       VARCHAR2(60 BYTE),
  FC_MENSTR     VARCHAR2(60 BYTE),
  FC_ANTIZACH   VARCHAR2(60 BYTE),
  FN_BEREMEN    NUMBER(2)                       DEFAULT 0,
  FN_ROD        NUMBER(2)                       DEFAULT 0,
  FN_ABORT      NUMBER(2)                       DEFAULT 0,
  FN_VIKID      NUMBER(2)                       DEFAULT -1,
  FC_MENOPAUSA  VARCHAR2(60 BYTE),
  FL_HRAP       NUMBER(1)                       DEFAULT 0,
  FL_AMB        NUMBER(1)                       DEFAULT 0
)
TABLESPACE USR
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          13600K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING
/

COMMENT ON TABLE ASU.TANAMNEZ IS 'Анамнезы жизни пациентов by TimurLan'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FK_ID IS 'SEQUENCE=[SEQ_TANAMNEZ]'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FK_PACID IS 'код пациента'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_NASL IS 'наследстенность'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FD_TRUD IS 'начало трудовой деятельности'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_WORK IS 'место работы'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_PITANIE IS 'качество питания'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_SEM_POL IS 'семейное положение'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_CHILD IS 'наличие детей'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FP_KUR IS 'табакозависимость'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_ALC IS 'употребление алкоголя'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_MET_ROP IS 'метеотропность'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_PROF_VRED IS 'проф. вредности'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_FIZ_AKT IS 'физческие нагрузки'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_ALERG IS 'аллергия'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_OPERATION IS 'хирургическое вмешательство'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_NERV IS 'психологические расстройства'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_MENSTR IS 'менструации'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_ANTIZACH IS 'контрацепция'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FN_BEREMEN IS 'беременности'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FN_ROD IS 'роды'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FN_ABORT IS 'аборты'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FN_VIKID IS 'выкидыши'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FC_MENOPAUSA IS 'менопауза'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FL_HRAP IS 'храп'
/

COMMENT ON COLUMN ASU.TANAMNEZ.FL_AMB IS 'признак амбулаторного пациента'
/


--
-- TANAMNEZ_BY_FK_ID  (Index) 
--
--  Dependencies: 
--   TANAMNEZ (Table)
--
CREATE UNIQUE INDEX ASU.TANAMNEZ_BY_FK_ID ON ASU.TANAMNEZ
(FK_ID)
NOLOGGING
TABLESPACE INDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          4M
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL
/


--
-- TANAMNEZ_BY_FK_PACID  (Index) 
--
--  Dependencies: 
--   TANAMNEZ (Table)
--
CREATE INDEX ASU.TANAMNEZ_BY_FK_PACID ON ASU.TANAMNEZ
(FK_PACID)
NOLOGGING
TABLESPACE INDX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          4736K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL
/


--
-- TANAMNEZ_BEFORE_INSERT  (Trigger) 
--
--  Dependencies: 
--   TANAMNEZ (Table)
--
CREATE OR REPLACE TRIGGER ASU."TANAMNEZ_BEFORE_INSERT" 
  BEFORE INSERT
  ON ASU.TANAMNEZ   REFERENCING NEW AS NEW OLD AS OLD
  FOR EACH ROW
Begin
  SELECT SEQ_TANAMNEZ.NEXTVAL INTO :NEW.FK_ID FROM DUAL;
End;
/
SHOW ERRORS;


