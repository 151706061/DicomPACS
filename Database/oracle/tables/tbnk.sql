DROP TABLE ASU.TBNK CASCADE CONSTRAINTS
/

--
-- TBNK  (Table) 
--
CREATE TABLE ASU.TBNK
(
  FK_ID         NUMBER(15),
  FK_COMPANYID  NUMBER(15)                      DEFAULT 0                     NOT NULL,
  FC_NAME       VARCHAR2(100 BYTE),
  FC_SHORT      VARCHAR2(30 BYTE),
  FK_COUNTRYID  NUMBER(15)                      DEFAULT 0                     NOT NULL,
  FK_REGIONID   NUMBER(15)                      DEFAULT 0                     NOT NULL,
  FK_TOWNID     NUMBER(15)                      DEFAULT 0                     NOT NULL,
  FC_ADR        VARCHAR2(90 BYTE),
  FC_BIK        VARCHAR2(15 BYTE),
  FC_OKONH      VARCHAR2(15 BYTE),
  FC_OKPO       VARCHAR2(15 BYTE),
  FC_INN        VARCHAR2(15 BYTE),
  FC_RS         VARCHAR2(15 BYTE),
  FC_KS         VARCHAR2(15 BYTE)
)
TABLESPACE USR
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          520K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING
/

COMMENT ON TABLE ASU.TBNK IS 'Справочник банков by TimurLan '
/

COMMENT ON COLUMN ASU.TBNK.FK_ID IS 'SEQUENCE=[SEQ_TBNK]'
/

COMMENT ON COLUMN ASU.TBNK.FK_COMPANYID IS 'TCOMPANY.FK_ID'
/

COMMENT ON COLUMN ASU.TBNK.FC_NAME IS 'полное название'
/

COMMENT ON COLUMN ASU.TBNK.FC_SHORT IS 'краткое название'
/

COMMENT ON COLUMN ASU.TBNK.FK_COUNTRYID IS 'TCOUNTRY.FK_ID'
/

COMMENT ON COLUMN ASU.TBNK.FK_REGIONID IS 'TREGION.FK_ID'
/

COMMENT ON COLUMN ASU.TBNK.FK_TOWNID IS 'TTOWN.FK_ID'
/

COMMENT ON COLUMN ASU.TBNK.FC_ADR IS 'адрес'
/

COMMENT ON COLUMN ASU.TBNK.FC_BIK IS 'код БИК'
/

COMMENT ON COLUMN ASU.TBNK.FC_OKONH IS 'код ОКОНХ'
/

COMMENT ON COLUMN ASU.TBNK.FC_OKPO IS 'код ОКПО'
/

COMMENT ON COLUMN ASU.TBNK.FC_INN IS 'код ИНН'
/

COMMENT ON COLUMN ASU.TBNK.FC_RS IS 'расчетный счет'
/

COMMENT ON COLUMN ASU.TBNK.FC_KS IS 'кор. счет'
/


--
-- TBNK_BEFORE_INSERT  (Trigger) 
--
--  Dependencies: 
--   TBNK (Table)
--
CREATE OR REPLACE TRIGGER ASU."TBNK_BEFORE_INSERT" 
BEFORE INSERT
ON ASU.TBNK REFERENCING OLD AS OLD NEW AS NEW
FOR EACH ROW
Begin
  SELECT SEQ_TBNK.NEXTVAL INTO :NEW.FK_ID FROM DUAL;
End;
/
SHOW ERRORS;


