ALTER TABLE ASU.TPAC_VISITOR
 DROP PRIMARY KEY CASCADE
/

DROP TABLE ASU.TPAC_VISITOR CASCADE CONSTRAINTS
/

--
-- TPAC_VISITOR  (Table) 
--
CREATE TABLE ASU.TPAC_VISITOR
(
  FK_ID              NUMBER,
  FK_PACID           NUMBER,
  FC_FAM             VARCHAR2(512 BYTE),
  FC_IM              VARCHAR2(512 BYTE),
  FC_OTCH            VARCHAR2(512 BYTE),
  FK_VISITOR_TYPEID  NUMBER
)
TABLESPACE USR
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOLOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING
/

COMMENT ON COLUMN ASU.TPAC_VISITOR.FK_PACID IS 'TKARTA.FK_ID'
/

COMMENT ON COLUMN ASU.TPAC_VISITOR.FK_VISITOR_TYPEID IS 'TSMID.FK_ID'
/


--
-- PK_PAC_VISITOR  (Index) 
--
--  Dependencies: 
--   TPAC_VISITOR (Table)
--
CREATE UNIQUE INDEX ASU.PK_PAC_VISITOR ON ASU.TPAC_VISITOR
(FK_ID)
NOLOGGING
TABLESPACE USR
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL
/


--
-- TPAC_VISITOR_BI  (Trigger) 
--
--  Dependencies: 
--   TPAC_VISITOR (Table)
--
CREATE OR REPLACE TRIGGER ASU."TPAC_VISITOR_BI" 
  BEFORE INSERT
  ON ASU.TPAC_VISITOR   REFERENCING NEW AS NEW OLD AS OLD
  FOR EACH ROW
Begin
  select SEQ_TPAC_VISITOR.NEXTVAL INTO :NEW.FK_ID FROM DUAL;
End;
/
SHOW ERRORS;


-- 
-- Non Foreign Key Constraints for Table TPAC_VISITOR 
-- 
ALTER TABLE ASU.TPAC_VISITOR ADD (
  CONSTRAINT PK_PAC_VISITOR
 PRIMARY KEY
 (FK_ID))
/

