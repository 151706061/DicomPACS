DROP TABLE ASU.TPROFP_ISPOL CASCADE CONSTRAINTS
/

--
-- TPROFP_ISPOL  (Table) 
--
CREATE TABLE ASU.TPROFP_ISPOL
(
  FK_ID         NUMBER(5),
  FK_SMID       NUMBER(15),
  FK_ISPOLID    NUMBER(15),
  FK_KABINETID  NUMBER(15),
  FC_TIME       VARCHAR2(20 BYTE)
)
TABLESPACE USR
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          80K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING
/

COMMENT ON COLUMN ASU.TPROFP_ISPOL.FK_ID IS 'SEQUENCE=[SEQ_TPROFP_ISPOL]'
/

COMMENT ON COLUMN ASU.TPROFP_ISPOL.FK_SMID IS 'код назначения TSMID'
/

COMMENT ON COLUMN ASU.TPROFP_ISPOL.FK_ISPOLID IS 'код исполнителя TSOTR'
/

COMMENT ON COLUMN ASU.TPROFP_ISPOL.FK_KABINETID IS 'код кабинета TKABINET'
/

COMMENT ON COLUMN ASU.TPROFP_ISPOL.FC_TIME IS 'Время работы кабинета'
/


--
-- TPROFP_ISPOL_BEFORE_INSERT  (Trigger) 
--
--  Dependencies: 
--   TPROFP_ISPOL (Table)
--
CREATE OR REPLACE TRIGGER ASU."TPROFP_ISPOL_BEFORE_INSERT" 
 BEFORE
  INSERT
 ON tprofp_ispol
REFERENCING NEW AS NEW OLD AS OLD
 FOR EACH ROW
begin
  select seq_tprofp_ispol.NEXTVAL into :new.fk_id from dual;
end;
/
SHOW ERRORS;


