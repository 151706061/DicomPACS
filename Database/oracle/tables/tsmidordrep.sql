DROP TABLE ASU.TSMIDORDREP CASCADE CONSTRAINTS
/

--
-- TSMIDORDREP  (Table) 
--
CREATE TABLE ASU.TSMIDORDREP
(
  FK_ID       NUMBER,
  FK_OWNER    NUMBER,
  FC_NAME     VARCHAR2(4000 BYTE),
  FC_MKB10    VARCHAR2(10 BYTE),
  FK_PROCID   NUMBER,
  FK_DIAGID   NUMBER,
  FK_KONSID   NUMBER,
  FK_ISSLID   NUMBER,
  FN_ORDER    NUMBER,
  FL_SHOWREP  NUMBER                            DEFAULT 1,
  FN_WHAT     NUMBER,
  FL_EMPTY    NUMBER(1)
)
TABLESPACE USR
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          520K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING
/

COMMENT ON TABLE ASU.TSMIDORDREP IS 'Отчет по нозологии'
/

COMMENT ON COLUMN ASU.TSMIDORDREP.FK_ID IS 'SEQUENCE=[SEQ_TSMIDORDREP]'
/

COMMENT ON COLUMN ASU.TSMIDORDREP.FK_OWNER IS 'Код родителя'
/

COMMENT ON COLUMN ASU.TSMIDORDREP.FC_NAME IS 'Имя'
/

COMMENT ON COLUMN ASU.TSMIDORDREP.FC_MKB10 IS 'Код по классификации MKB10'
/

COMMENT ON COLUMN ASU.TSMIDORDREP.FK_PROCID IS 'Код процедуры (TSMID)'
/

COMMENT ON COLUMN ASU.TSMIDORDREP.FK_DIAGID IS 'Код диагноза (TDIAG)'
/

COMMENT ON COLUMN ASU.TSMIDORDREP.FK_KONSID IS 'Код консультации (TSMID)'
/

COMMENT ON COLUMN ASU.TSMIDORDREP.FK_ISSLID IS 'Код исследования (TSMID)'
/

COMMENT ON COLUMN ASU.TSMIDORDREP.FN_ORDER IS 'Иерархия дерева'
/

COMMENT ON COLUMN ASU.TSMIDORDREP.FL_SHOWREP IS 'Показывать или нет'
/

COMMENT ON COLUMN ASU.TSMIDORDREP.FN_WHAT IS 'Универсальное поле'
/

COMMENT ON COLUMN ASU.TSMIDORDREP.FL_EMPTY IS 'Пустая строка(столбец) = 0'
/


--
-- TSMIDORDREP_INSERT  (Trigger) 
--
--  Dependencies: 
--   TSMIDORDREP (Table)
--
CREATE OR REPLACE TRIGGER ASU."TSMIDORDREP_INSERT" 
  BEFORE INSERT ON tsmidordrep
  FOR EACH ROW
DECLARE
BEGIN
  SELECT seq_tsmidordrep.NEXTVAL INTO :NEW.fk_id FROM DUAL;
END;
/
SHOW ERRORS;


