CREATE OR REPLACE FUNCTION ASU.GET_SOOTV_TYPEOPL_SMID(AID     NUMBER,
                                                  AISSMID NUMBER DEFAULT 1)
  RETURN NUMBER IS
  RESULT NUMBER;
  SYN    VARCHAR2(255);
  CURSOR CSMID IS
    SELECT FC_SYNONIM FROM ASU.TSMID WHERE FK_ID = AID;
  CURSOR CTYPEOPL IS
    SELECT FC_SYNONIM FROM ASU.TTYPEDOC WHERE FK_ID = AID;
  CURSOR CSMIDS IS
    SELECT FK_ID FROM ASU.TSMID WHERE FC_SYNONIM = SYN;
  CURSOR CTYPEOPLS IS
    SELECT FK_ID FROM ASU.TTYPEDOC WHERE FC_SYNONIM = SYN;
BEGIN
  IF AISSMID = 1 THEN
    OPEN CSMID;
    FETCH CSMID
      INTO SYN;
    IF CSMID%NOTFOUND THEN
      SYN := '';
    END IF;
    CLOSE CSMID;
    SYN := ASU.GET_SOOTV_TYPEOPL_SMID_SYN(SYN, AISSMID);
    OPEN CTYPEOPLS;
    FETCH CTYPEOPLS
      INTO RESULT;
    IF CTYPEOPLS%NOTFOUND THEN
      RESULT := -1;
    END IF;
    CLOSE CTYPEOPLS;
  ELSE
    OPEN CTYPEOPL;
    FETCH CTYPEOPL
      INTO SYN;
    IF CTYPEOPL%NOTFOUND THEN
      SYN := '';
    END IF;
    CLOSE CTYPEOPL;
    SYN := ASU.GET_SOOTV_TYPEOPL_SMID_SYN(SYN, AISSMID);
    OPEN CSMIDS;
    FETCH CSMIDS
      INTO RESULT;
    IF CSMIDS%NOTFOUND THEN
      RESULT := -1;
    END IF;
    CLOSE CSMIDS;
  END IF;
  RETURN(RESULT);
END;