CREATE OR REPLACE TRIGGER MED.TEI_INS
 BEFORE 
 INSERT
 ON MED.TEI
 REFERENCING OLD AS OLD NEW AS NEW
 FOR EACH ROW 
BEGIN
  IF :NEW.EIID IS NULL OR :NEW.EIID < 0 THEN
    SELECT SEQ_TEI.NEXTVAL INTO :NEW.EIID FROM DUAL;
  END IF;
  
  IF MED.PKG_MEDSES.get_isusesklad = 1 then
    :NEW.FK_SKLAD_ID := MED.PKG_MEDSES.get_cur_mo_sklad_id;
  end if;
END;
/
